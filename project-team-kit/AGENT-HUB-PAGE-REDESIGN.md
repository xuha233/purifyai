# AgentHubPage 页面重新设计方案

**设计时间：** 2026-02-24
**设计师：** 小午 🦁
**目标：** 简化选项卡，清晰视觉层次，突出主入口

---

## 现状分析

### 当前页面结构

`AgentHubPage` 当前包含以下组件：

1. **Agent Status Card** - 智能体状态卡片
2. **Agent Stats Widget** - 统计面板
3. **Agent Control Panel** - 任务控制面板
4. **Agent Pipeline Widget** - AI 管道（扫描→审查→执行→报告）
5. **Thinking Stream Widget** - AI 思考流
6. **Tool Logger Widget** - 工具调用日志
7. **Cleanup Preview** - 一键清理预览
8. **Cleanup Progress** - 清理进度

### 当前问题

| 问题 | 描述 | 优先级 |
|------|------|--------|
| 选项卡过多 | 某些功能被分散在不同的区域，缺乏统一入口 | High |
| 主入口不明显 | 一键清理、增量清理等 P0 功能缺乏突出显示 | High |
| 视觉层次混乱 | 智能体状态、清理功能、工具日志混杂在一起 | Medium |
| 新功能整合差 | 新增功能（一键清理、增量清理）只是"附加"到现有UI上 | High |

---

## 重新设计方案

### 设计目标

1. **简化选项卡**：将分散的功能整合到 3-4 个选项卡中
2. **突出主入口**：一键清理和增量清理作为最优先功能
3. **清晰视觉层次**：从左到右：状态 → 操作 → 详情
4. **统一设计语言**：使用 Fluent Design 风格

### 选项卡架构（4 个）

#### Tab 1: 概览（Overview）

**目标：** 快速状态 + 主操作入口

布局：
```
┌─────────────────────────────────────────────────────────────┐
│  智能体状态卡片 │  AI 健康评分 (P1, 可选)                      │
│  - 运行状态: 就绪│  - 总体评分: 85/100                        │
│  - 活跃任务: 0  │  - 建议清理: 2.5 GB                        │
├─────────────────────────────────────────────────────────────┤
│  一键清理（主入口）                                         │
│  [🚀 开始一键清理]                                          │
│  预计释放空间: ~2.5 GB | 风险程度: 低                        │
│                 或                                           │
│  [🔍 增量清理] ← 仅新增文件                                 │
├─────────────────────────────────────────────────────────────┤
│  快速统计                                                      │
│  - 今日清理: 0 次                                           │
│  - 总释放空间: 0 GB                                         │
│  - 上次清理: 3 天前                                        │
└─────────────────────────────────────────────────────────────┘
```

内容：
- 智能体状态概览（左上）
- AI 健康评分（右上，P1，未来）
- **一键清理按钮**（大、突出，中心位置）
- **增量清理按钮**（次要入口，旁边或下方）
- 快速统计（底部）

---

#### Tab 2: 清理（Cleanup）

**目标：** 详细清理操作

布局：
```
┌─────────────────────────────────────────────────────────────┐
│  清理模式选择                                                │
│  ○ 一键清理（智能）                                         │
│  ○ 增量清理（仅新增文件）                                   │
│  ○ 高级模式（自定义）                                      │
├─────────────────────────────────────────────────────────────┤
│  清理预览                                                    │
│  ┌───────────────────────────────────────────────────────┐ │
│  │ 扫描项目: 15,234 个                                   │ │
│  │ 建议清理: 3,456 个                                     │ │
│  │ 预计释放空间: 2.5 GB                                  │ │
│  │ 风险程度: 低 🟢                                       │ │
│  └───────────────────────────────────────────────────────┘ │
│  [查看详情] [开始清理]                                      │
├─────────────────────────────────────────────────────────────┤
│  清理进度                                                    │
│  ┌───────────────────────────────────────────────────────┐ │
│  │ [████████████░░░░] 75%                                  │ │
│  │ 正在清理: 2,592 / 3,456 文件                            │ │
│  │ 释放空间: 1.8 GB / 2.5 GB                              │ │
│  │ 剩余时间: ~30 秒                                       │ │
│  └───────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────┘
```

内容：
- 清理模式选择（一键、增量、高级）
- 清理预览（调用 CleanupPreviewDialog）
- 清理进度（调用 CleanupProgressWidget）

---

#### Tab 3: 智能体（Agents）

**目标：** 智能体控制和监控

布局：
```
┌─────────────────────────────────────────────────────────────┐
│  智能体控制面板                                                │
│  选择智能体: [扫描 ▼] [AI 分析 ▼] [清理执行 ▼]              │
│  启动 │ 暂停 │ 停止 │ 配置                                  │
├─────────────────────────────────────────────────────────────┤
│  AI Pipeline                                                 │
│  [扫描] → [审查] → [执行] → [报告]                          │
│  ├─ 完成(100%)  ├─ 处理中   ├─ 等待    ├─ 等待             │
├─────────────────────────────────────────────────────────────┤
│  Thinking Stream                                            │
│  > 正在分析文件类型分布...                                   │
│  > 发现 1,234 个临时文件                                      │
│  > 计算清理策略...                                           │
├─────────────────────────────────────────────────────────────┤
│  性能监控                                                    │
│  CPU 使用: 15% | 内存使用: 256 MB | 网络请求: 12            │
└─────────────────────────────────────────────────────────────┘
```

内容：
- 智能体控制面板（AgentControlPanel）
- AI Pipeline（AgentPipelineWidget）
- Thinking Stream（ThinkingStreamWidget）
- 性能监控

---

#### Tab 4: 日志与设置（Settings）

**目标：** 高级功能和日志

布局：
```
┌─────────────────────────────────────────────────────────────┐
│  功能选项                                                    │
│  清理偏好: [○ 保守模式] [● 平衡模式] [○ 激进模式]          │
│  备份设置: 启用自动备份 [✓] 保留天数 [30]                    │
│  定时清理: 启用 [ ] 每天 [02:00]                          │
├─────────────────────────────────────────────────────────────┤
│  工具调用日志                                                │
│  ┌───────────────────────────────────────────────────────┐ │
│  │ 18:23:45 [SCAN] 扫描完成: 15,234 个文件              │ │
│  │ 18:24:01 [ANALYZE] AI 分析完成: 3,456 清理项        │ │
│  │ 18:24:30 [CLEANUP] 清理完成: 释放 2.5 GB             │ │
│  │ [📄 导出日志] [🔍 搜索]                                │ │
│  └───────────────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────────────┤
│  错误日志                                                    │
│  ┌───────────────────────────────────────────────────────┐ │
│  │ [ERROR] 磁盘权限不足: G:\System Volume Information   │ │
│  │ [WARNING] 跳过大文件: video.mp4 (1.2 GB)              │ │
│  │ [详细信息] [清除]                                       │ │
│  └───────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────┘
```

内容：
- 清理偏好设置（模式选择）
- 备份设置
- 定时清理（P1，未来）
- 工具调用日志（ToolLoggerWidget）
- 错误日志

---

## 功能入口分配

| 功能 | 优先级 | 主入口 | 次要入口 |
|------|--------|--------|----------|
| 一键清理 | P0 | Tab 1（概览） | Tab 2（清理详细） |
| 增量清理 | P0 | Tab 1（概览） | Tab 2（清理详细） |
| 清理预览 | P1 | Tab 2（清理） | - |
| 清理进度 | P1 | Tab 1（概览） | Tab 2（清理） |
| 智能体控制 | P2 | Tab 3（智能体） | - |
| AI Pipeline | P2 | Tab 3（智能体） | - |
| Thinking Stream | P2 | Tab 3（智能体） | - |
| 工具日志 | P3 | Tab 4（日志） | - |
| 设置 | P2 | Tab 4（日志） | - |

---

## 设计原则

### 1. 视觉层次

```
Level 1: 主操作（一键清理、增量清理）
Level 2: 状态显示（智能体状态、清理统计）
Level 3: 详细信息（清理预览、AI Pipeline）
Level 4: 辅助信息（日志、设置）
```

### 2. 颜色方案

| 用途 | 颜色 |
|------|------|
| 主按钮（一键清理） | Primary（#0078D4） |
| 次要按钮（增量清理） | Success（#107C10） |
| 警告/风险 | Warning（#FF8C00） |
| 错误 | Error（#D13438）|
| 中性文本 | 主文本（#1A1A1A）、次要文本（#666666） |

### 3. 间距规则

| 元素 | 间距 |
|------|------|
| 卡片内部 | 12px |
| 卡片之间 | 20px |
| 选项卡区域之间 | 24px |
| 页面边距 | 32px |

---

## 实施计划

### Part 1: 创建选项卡容器（30 分钟）

- 添加 `QTabWidget` 到 `AgentHubPage`
- 创建 4 个选项卡
- 设置选项卡样式（Fluent）

### Part 2: 迁移到 Tab 1（概览）（1.5 小时）

- 智能体状态卡片
- 一键清理按钮（主入口）
- 增量清理按钮（次要入口）
- 快速统计

### Part 3: 迁移到 Tab 2（清理）（1.5 小时）

- 清理模式选择
- CleanupPreviewDialog
- CleanupProgressWidget

### Part 4: 迁移到 Tab 3（智能体）（1.5 小时）

- AgentControlPanel
- AgentPipelineWidget
- ThinkingStreamWidget
- 性能监控

### Part 5: 迁移到 Tab 4（日志）（1 小时）

- 清理偏好设置
- 备份设置
- ToolLoggerWidget
- 错误日志

### Part 6: 视觉优化（30 分钟）

- 统一颜色方案
- 调整间距
- 添加动画

---

## 预期成果

### 量化指标

- 选项卡数量：3-4 个（从 7-8 个减少）
- 主入口点击路径：1-2 步（从 3-4 步减少）
- 视觉焦点：80% 用户第一眼注意到主入口

### 用户体验

- 新用户：5 秒内找到主入口
- 老用户：3 秒内完成常用操作
- 视觉统一性：100% Fluent Design

---

**完成时间：** 2026-02-24 18:30
**下一步：** 在 Agent Teams 中分配任务执行

