# PurifyAI AIå¤æ ¸åŠŸèƒ½å®ç°è®¡åˆ’ä¹¦

> é¡¹ç›®: PurifyAI (Python + PyQt5 + QFluentWidgets)
> ç‰ˆæœ¬: v0.1.4
> è®¡åˆ’æ—¥æœŸ: 2026-02-19
> çŠ¶æ€: å¾…å®æ–½

---

## ä¸€ã€éœ€æ±‚æ¦‚è¿°

### 1.1 æ ¸å¿ƒéœ€æ±‚

1. **AIå¤æ ¸æµç¨‹**: æ‰«æå®Œæˆåï¼Œç”¨æˆ·å¯ç‚¹å‡»"AIå¤æ ¸"æŒ‰é’®å¯¹ç–‘ä¼¼é¡¹è¿›è¡Œæ™ºèƒ½è¯„ä¼°
2. **AIæ¨ç†å±•ç¤º**: å¡ç‰‡å†…æ˜¾ç¤ºç°è‰²å°å­—ï¼ŒåŒ…å«ï¼š
   - æ–‡ä»¶å¤¹åŠŸèƒ½è¯´æ˜
   - æ‰€å±è½¯ä»¶
   - æ¸…ç†é£é™©å»ºè®®
3. **è‡ªåŠ¨å½’ç±»**: AIè¿”å›ç‰¹å®šæ ¼å¼ï¼Œç³»ç»Ÿè‡ªåŠ¨å½’ç±»åˆ°å®‰å…¨/å±é™©
4. **ç–‘ä¼¼äººå·¥å®¡æ ¸**: ç–‘ä¼¼é¡¹éœ€è¦äººå·¥åˆ¤æ–­å¤„ç†
5. **å¼‚å¸¸å¤„ç†**: AIè¿”å›æ ¼å¼é”™è¯¯æ—¶è‡ªåŠ¨é‡è¯•

### 1.2 ç”¨æˆ·ä½“éªŒæµç¨‹

```
æ‰«æå®Œæˆ â†’ å‡ºç°ç–‘ä¼¼é¡¹ â†’ ç‚¹å‡»AIå¤æ ¸ â†’ AIè¯„ä¼°ä¸­ â†’ æ˜¾ç¤ºè¯„ä¼°ç»“æœ â†’ äººå·¥å®¡æ ¸ â†’ æ¸…ç†
```

---

## äºŒã€UIè®¾è®¡

### 2.1 å¡ç‰‡ç»„ä»¶è®¾è®¡

#### æ‰«æå®Œæˆæ—¶ï¼ˆåˆå§‹çŠ¶æ€ï¼‰
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â˜‘  ğŸ“ Cache                        â”‚
â”‚    å¤§å°: 125.5 MB                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### AIå¤æ ¸åï¼ˆå¢å¼ºçŠ¶æ€ï¼‰
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â˜‘  ğŸ“‚ UserData                 ã€AIå·²å¤æ ¸ã€‘     â”‚
â”‚    å¤§å°: 125.5 MB                               â”‚
â”‚    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚    ğŸ” AIåˆ†æç»“æœ:                               â”‚
â”‚    åŠŸèƒ½: Chromeæµè§ˆå™¨ç”¨æˆ·æ•°æ®å­˜å‚¨ç›®å½•            â”‚
â”‚    è½¯ä»¶: Google Chrome                         â”‚
â”‚    é£é™©: âš ï¸ ç–‘ä¼¼ - å«ç™»å½•çŠ¶æ€å’ŒCookie          â”‚
â”‚    å»ºè®®: å»ºè®®ä¿ç•™ï¼Œåˆ é™¤éœ€é‡æ–°ç™»å½•                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 æŒ‰é’®çŠ¶æ€è®¾è®¡

| é˜¶æ®µ | AIå¤æ ¸æŒ‰é’®çŠ¶æ€ | è¯´æ˜ |
|------|----------------|------|
| æ‰«æå®Œæˆï¼Œæ— ç–‘ä¼¼é¡¹ | éšè— | æ— éœ€è¯„ä¼° |
| æ‰«æå®Œæˆï¼Œæœ‰ç–‘ä¼¼é¡¹ | å¯ç‚¹å‡» | å¯ç”¨AIè¯„ä¼° |
| AIè¯„ä¼°ä¸­ | ç¦ç”¨ï¼Œæ˜¾ç¤ºåŠ è½½ | æ­£åœ¨å¤„ç† |
| AIè¯„ä¼°å®Œæˆ | å¯ç‚¹å‡» | æ”¯æŒé‡æ–°è¯„ä¼° |

### 2.3 çŠ¶æ€æŒ‡ç¤ºå™¨è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ” AIçŠ¶æ€: å°±ç»ª                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  AIå·²è¯„ä¼°: 5é¡¹                      â”‚
â”‚  â””â”€ å®‰å…¨: 3é¡¹ ğŸŸ¢                   â”‚
â”‚  â””â”€ å±é™©: 1é¡¹ ğŸ”´                   â”‚
â”‚  â””â”€ ç–‘ä¼¼: 1é¡¹ ğŸŸ¡ (éœ€äººå·¥ç¡®è®¤)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ä¸‰ã€æŠ€æœ¯æ¶æ„

### 3.1 æ ¸å¿ƒæ¨¡å—

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  UI Layer (PyQt5)                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Card     â”‚  â”‚ AIReview â”‚  â”‚  StatusWidget    â”‚ â”‚
â”‚  â”‚ Componentâ”‚  â”‚  Dialog  â”‚  â”‚                  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Business Logic Layer                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ AIReviewTask â”‚ â”‚AIResultStore â”‚  â”‚  ItemAudit â”‚ â”‚
â”‚  â”‚   (Worker)   â”‚  â”‚   (Manager)  â”‚  â”‚(Classifier)â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  AI Service Layer                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ AIClient     â”‚  â”‚PromptBuilder â”‚  â”‚ResponseParserâ”‚â”‚
â”‚  â”‚              â”‚  â”‚   (Custom)   â”‚  â”‚   (Strict)    â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 æ•°æ®æ¨¡å‹

#### AIReviewResult (AIè¯„ä¼°ç»“æœ)
```python
@dataclass
class AIReviewResult:
    """AIå¤æ ¸ç»“æœ"""
    item_path: str           # é¡¹ç›®è·¯å¾„
    original_risk: RiskLevel # åŸå§‹é£é™©ç­‰çº§
    ai_risk: RiskLevel      # AIè¯„ä¼°åçš„é£é™©ç­‰çº§
    confidence: float       # ç½®ä¿¡åº¦ 0-1
    function_desc: str      # åŠŸèƒ½æè¿°
    software_name: str      # æ‰€å±è½¯ä»¶
    risk_reason: str        # é£é™©åŸå› 
    cleanup_suggestion: str # æ¸…ç†å»ºè®®
    ai_reasoning: str       # AIæ¨ç†è¿‡ç¨‹
    review_timestamp: datetime # å¤æ ¸æ—¶é—´
    retry_count: int       # é‡è¯•æ¬¡æ•°
```

#### AIReviewStatus (å¤æ ¸çŠ¶æ€)
```python
@dataclass
class AIReviewStatus:
    """AIå¤æ ¸çŠ¶æ€"""
    total_items: int       # æ€»é¡¹æ•°
    reviewed_items: int    # å·²è¯„ä¼°é¡¹æ•°
    success_count: int     # æˆåŠŸæ•°
    safe_count: int        # å®‰å…¨éƒ½æ•°
    dangerous_count: int   # å±é™©æ•°
    suspicious_count: int  # ç–‘ä¼¼æ•°
    failed_count: int      # å¤±è´¥æ•°
    is_in_progress: bool   # æ˜¯å¦è¿›è¡Œä¸­
    current_item: str = "" # å½“å‰è¯„ä¼°é¡¹
```

---

## å››ã€å®ç°æ–¹æ¡ˆ

### 4.1 Phase 1: AIæç¤ºè¯è®¾è®¡ï¼ˆæ ¸å¿ƒï¼‰

#### 4.1.1 ä¸¥æ ¼æ ¼å¼è¦æ±‚

AIå¿…é¡»è¿”å›ä»¥ä¸‹ä¸¥æ ¼æ ¼å¼çš„JSONï¼š

```json
{
    "ai_risk": "safe" | "suspicious" | "dangerous",
    "confidence": 0.0-1.0,
    "function_description": "æ–‡ä»¶å¤¹åŠŸèƒ½è¯´æ˜ï¼ˆ30å­—ä»¥å†…ï¼‰",
    "software_name": "æ‰€å±è½¯ä»¶ï¼ˆ20å­—ä»¥å†…ï¼‰",
    "risk_reason": "é£é™©åŸå› ï¼ˆ20å­—ä»¥å†…ï¼‰",
    "cleanup_suggestion": "æ¸…ç†å»ºè®®ï¼ˆ25å­—ä»¥å†…ï¼‰"
}
```

#### 4.1.2 æç¤ºè¯æ¨¡æ¿

```python
ASSESSMENT_PROMPT = """# è§’è‰²ï¼šWindows æ–‡ä»¶å®‰å…¨è¯„ä¼°ä¸“å®¶

## ä»»åŠ¡
è¯„ä¼°ä»¥ä¸‹æ–‡ä»¶/æ–‡ä»¶å¤¹çš„åˆ é™¤é£é™©ï¼Œæä¾›è¯¦ç»†åˆ†æã€‚

## è¯„ä¼°æ ‡å‡†
### å®‰å…¨ (safe) - å¯å®‰å…¨åˆ é™¤
- æ˜ç¡®çš„ç¼“å­˜ã€ä¸´æ—¶ã€æ—¥å¿—æ–‡ä»¶
- 90å¤©ä»¥ä¸Šæœªè®¿é—®çš„æ–‡ä»¶
- åº”ç”¨å¸è½½æ®‹ç•™

### ç–‘ä¼¼ (suspicious) - éœ€ç”¨æˆ·ç¡®è®¤
- é…ç½®æ–‡ä»¶ã€åå¥½è®¾ç½®
- ä¸ç¡®å®šç”¨é€”çš„æ–‡ä»¶
- å¯èƒ½åŒ…å«ç”¨æˆ·æ•°æ®çš„ç›®å½•

### å±é™© (dangerous) - ä¸å»ºè®®åˆ é™¤
- ç³»ç»Ÿå…³é”®æ–‡ä»¶/ç›®å½•
- ç”¨æˆ·é‡è¦æ•°æ®
- åº”ç”¨æ ¸å¿ƒç¨‹åºæ–‡ä»¶
- æ•°æ®åº“ã€ç´¢å¼•æ–‡ä»¶

## æ–‡ä»¶ä¿¡æ¯
è·¯å¾„: {path}
ç±»å‹: {item_type}
å¤§å°: {size}
åŸå§‹è¯„çº§: {original_risk}

## è¾“å‡ºè¦æ±‚
**å¿…é¡»ä¸¥æ ¼æŒ‰ç…§ä»¥ä¸‹JSONæ ¼å¼è¾“å‡ºï¼Œä¸è¦åŒ…å«ä»»ä½•å…¶ä»–æ–‡å­—**ï¼š
```json{{{
    "ai_risk": "safe"|"suspicious"|"dangerous",
    "confidence": 0.0-1.0,
    "function_description": "åŠŸèƒ½æè¿°ï¼ˆ30å­—ä»¥å†…ï¼‰",
    "software_name": "æ‰€å±è½¯ä»¶ï¼ˆ20å­—ä»¥å†…ï¼‰",
    "risk_reason": "é£é™©åŸå› ï¼ˆ20å­—ä»¥å†…ï¼‰",
    "cleanup_suggestion": "æ¸…ç†å»ºè®®ï¼ˆ25å­—ä»¥å†…ï¼‰"
}}}```

å¦‚æœæ— æ³•å‡†ç¡®åˆ¤æ–­ï¼Œconfidenceè¯·è®¾ä¸º<0.5ï¼Œai_riskè®¾ä¸ºsuspiciousã€‚
"""
```

### 4.2 Phase 2: å“åº”è§£æï¼ˆå®¹é”™æœºåˆ¶ï¼‰

#### 4.2.1 è§£æç­–ç•¥

```python
def parse_ai_response(response: str, max_retries: int = 3) -> Optional[AIReviewResult]:
    """
    è§£æAIå“åº”ï¼Œæ”¯æŒå¤šç§æ ¼å¼
    """
    strategies = [
        _extract_json_block,      # æå–```json```å—
        _extract_json_only,       # æå–çº¯JSON
        _extract_key_value,       # æå–é”®å€¼å¯¹æ¨¡å¼
        _fallback_parse           # å›é€€åˆ°æ­£åˆ™è§£æ
    ]

    for strategy in strategies:
        try:
            result = strategy(response)
            if result and _validate_result_format(result):
                return result
        except Exception:
            continue

    return None
```

#### 4.2.2 é‡è¯•æœºåˆ¶

```python
async def review_with_retry(item: ScanItem, max_retries: int = 3):
    """
    å¸¦é‡è¯•æœºåˆ¶çš„AIå¤æ ¸
    """
    for attempt in range(max_retries):
        try:
            response = await call_ai(item)
            result = parse_ai_response(response)

            if result:
                return result
            else:
                # æ ¼å¼é”™è¯¯ï¼Œè°ƒæ•´æç¤ºè¯é‡è¯•
                prompt = _build_retry_prompt(item, attempt)
                response = await call_ai_custom(prompt)
                result = parse_ai_response(response)
                if result:
                    return result

        except RateLimitError:
            await asyncio.sleep(2 ** attempt)  # æŒ‡æ•°é€€é¿
        except APIError as e:
            logger.error(f"AI APIé”™è¯¯: {e}")
            return None

    # æ‰€æœ‰é‡è¯•å¤±è´¥ï¼Œè¿”å›é»˜è®¤ç»“æœ
    return _get_default_review_result(item)
```

### 4.3 Phase 3: å¡ç‰‡UIä¼˜åŒ–

#### 4.3.1 å¡ç‰‡ç»“æ„

```python
class ReviewCard(SimpleCardWidget):
    """å¸¦AIå¤æ ¸ç»“æœçš„å¡ç‰‡"""

    def __init__(self, item: ScanItem, ai_result: Optional[AIReviewResult] = None):
        super().__init__()

        # åŸºç¡€ä¿¡æ¯
        self._add_basic_info(item)

        # AIå¤æ ¸ç»“æœ
        if ai_result:
            self._add_ai_review_section(ai_result)

        # å¤é€‰æ¡†
        self.checkbox = self._add_checkbox(item)

    def _add_ai_review_section(self, ai_result: AIReviewResult):
        """æ·»åŠ AIå¤æ ¸ç»“æœåŒºåŸŸ"""
        container = QWidget()
        container.setStyleSheet('''
            QWidget {
                background: #f8f9fa;
                border-radius: 8px;
                padding: 8px;
            }
        ''')

        layout = QVBoxLayout(container)
        layout.setSpacing(4)

        # æ ‡é¢˜
        title = QLabel('ğŸ” AIåˆ†æç»“æœ')
        title.setStyleSheet('font-size: 11px; font-weight: 600; color: #666;')
        layout.addWidget(title)

        # è¯¦ç»†ä¿¡æ¯ï¼ˆç°è‰²å°å­—ï¼‰
        info_template = f"""<div style="color: #888; font-size: 10px; line-height: 1.4;">
            åŠŸèƒ½: {ai_result.function_desc}<br>
            è½¯ä»¶: {ai_result.software_name}<br>
            é£é™©: <span style="color: {self._risk_color(ai_result.ai_risk)}">â—
            {self._risk_label(ai_result.ai_risk)}</span> {ai_result.risk_reason}<br>
            å»ºè®®: {ai_result.cleanup_suggestion}
        </div>"""

        info_label = QLabel(info_template)
        info_label.setTextFormat(Qt.RichText)
        layout.addWidget(info_label)
```

### 4.4 Phase 4: äººå·¥å®¡æ ¸æµç¨‹

#### 4.4.1 å®¡æ ¸è®°å½•

```python
class AuditLog:
    """äººå·¥å®¡æ ¸æ—¥å¿—"""

    @dataclass
    class Record:
        item_path: str
        user_decision: str  # "keep" | "delete" | "skip"
        original_ai_risk: RiskLevel
        final_risk: RiskLevel
        audit_timestamp: datetime
        audit_reason: Optional[str] = None

    def log_decision(self, item: ScanItem, decision: str, reason: str = ""):
        """è®°å½•ç”¨æˆ·å†³ç­–"""
        record = self.Record(
            item_path=item.path,
            user_decision=decision,
            original_ai_risk=item.ai_review_result.ai_risk,
            final_risk=item.risk_level,
            audit_timestamp=datetime.now(),
            audit_reason=reason
        )
        self._save_to_database(record)
```

### 4.5 Phase 5: è¿›åº¦è·Ÿè¸ª

#### 4.5.1 AIå¤æ ¸è¿›åº¦è¿½è¸ª

```python
class AIReviewTracker:
    """AIå¤æ ¸è¿›åº¦è¿½è¸ªå™¨"""

    def __init__(self):
        self.status = AIReviewStatus(total_items=0)
        self.callbacks = []

    def update_progress(self, progress: AIReviewStatus):
        """æ›´æ–°è¿›åº¦"""
        self.status = progress
        for callback in self.callbacks:
            callback(progress)

    def register_callback(self, callback):
        """æ³¨å†Œè¿›åº¦å›è°ƒ"""
        self.callbacks.append(callback)
```

---

## äº”ã€å®ç°æ­¥éª¤

### Step 1: æ ¸å¿ƒæ¨¡å—å®ç° (Day 1)

#### 1.1 æ•°æ®æ¨¡å‹
- [ ] åˆ›å»º `ai_review_models.py`
- [ ] å®šä¹‰ `AIReviewResult`
- [ ] å®šä¹‰ `AIReviewStatus`
- [ ] å®šä¹‰ `AuditLog.Record`

#### 1.2 AIæœåŠ¡å±‚
- [ ] å¢å¼º `ai_client.py` çš„é‡è¯•æœºåˆ¶
- [ ] åˆ›å»º `prompt_builder.py` - ä¸¥æ ¼æç¤ºè¯
- [ ] åˆ›å»º `response_parser.py` - å®¹é”™è§£æ
- [ ] åˆ›å»º `review_classifier.py` - ç»“æœåˆ†ç±»å™¨

#### 1.3 ä¸šåŠ¡é€»è¾‘å±‚
- [ ] åˆ›å»º `ai_review_task.py` - åå°ä»»åŠ¡
- [ ] åˆ›å»º `ai_result_store.py` - ç»“æœå­˜å‚¨
- [ ] åˆ›å»º `progress_tracker.py` - è¿›åº¦è¿½è¸ª

### Step 2: UIç»„ä»¶å®ç° (Day 2)

#### 2.1 å¡ç‰‡ç»„ä»¶
- [ ] é‡æ„ `_create_item_card` æ–¹æ³•
- [ ] æ·»åŠ AIç»“æœæ˜¾ç¤ºåŒºåŸŸ
- [ ] æ·»åŠ é‡æ–°è¯„ä¼°æŒ‰é’®

#### 2.2 è¿›åº¦ç»„ä»¶
- [ ] æ·»åŠ AIå¤æ ¸è¿›åº¦æ¡
- [ ] æ·»åŠ çŠ¶æ€ç»Ÿè®¡æ˜¾ç¤º
- [ ] æ·»åŠ è¯„ä¼°å®Œæˆé€šçŸ¥

#### 2.3 å¯¹è¯æ¡†
- [ ] åˆ›å»ºAIå¤æ ¸è¿›åº¦å¯¹è¯æ¡†
- [ ] åˆ›å»ºè¯„ä¼°ç»“æœè¯¦æƒ…å¯¹è¯æ¡†

### Step 3: é›†æˆä¸æµ‹è¯• (Day 3)

#### 3.1 é¡µé¢é›†æˆ
- [ ] `system_cleaner.py` é›†æˆ
- [ ] `browser_cleaner.py` é›†æˆ
- [ ] `custom_cleaner.py` é›†æˆ

#### 3.2 å¼‚å¸¸å¤„ç†
- [ ] APIé™æµå¤„ç†
- [ ] ç½‘ç»œè¶…æ—¶å¤„ç†
- [ ] è§£æå¤±è´¥å¤„ç†

#### 3.3 æµ‹è¯•
- [ ] æµ‹è¯•æ­£å¸¸æµç¨‹
- [ ] æµ‹è¯•å¼‚å¸¸åœºæ™¯
- [ ] æµ‹è¯•äººå·¥å®¡æ ¸æµç¨‹

---

## å…­ã€å¼‚å¸¸å¤„ç†ç­–ç•¥

### 6.1 AIè¿”å›å¼‚å¸¸

| å¼‚å¸¸ç±»å‹ | å¤„ç†ç­–ç•¥ |
|----------|----------|
| æ ¼å¼é”™è¯¯ | é‡è¯•1æ¬¡ï¼Œä½¿ç”¨ç®€åŒ–æç¤ºè¯ |
| JSONè§£æå¤±è´¥ | é‡è¯•1æ¬¡ï¼Œæå–é”®å€¼å¯¹ |
| å­—æ®µç¼ºå¤± | ä½¿ç”¨é»˜è®¤å€¼è¡¥å…… |
| ç½®ä¿¡åº¦è¿‡ä½ | æ ‡è®°ä¸ºsuspicious |

### 6.2 APIå¼‚å¸¸

| å¼‚å¸¸ç±»å‹ | å¤„ç†ç­–ç•¥ |
|----------|----------|
| é™æµ | æŒ‡æ•°é€€é¿é‡è¯•ï¼ˆ1s, 2s, 4sï¼‰ |
| è¶…æ—¶ | å¢åŠ è¶…æ—¶æ—¶é—´é‡è¯• |
| è®¤è¯å¤±è´¥ | æ˜¾ç¤ºé”™è¯¯ï¼Œåœæ­¢è¯„ä¼° |
| ç½‘ç»œé”™è¯¯ | é‡è¯•3æ¬¡åå¤±è´¥ |

### 6.3 ç”¨æˆ·æ“ä½œå¼‚å¸¸

| å¼‚å¸¸åœºæ™¯ | å¤„ç†ç­–ç•¥ |
|----------|----------|
| è¯„ä¼°ä¸­é€€å‡º | ä¿å­˜å½“å‰è¿›åº¦ï¼Œæ”¯æŒæ¢å¤ |
| ç”¨æˆ·å–æ¶ˆè¯„ä¼° | æ¸…ç†å·²è·å¾—ç»“æœï¼Œå…è®¸è·³è¿‡ |
| è¯„ä¼°å®Œæˆå‰å…³é—­ | åå°ç»§ç»­æˆ–ä¸­æ–­ |

---

## ä¸ƒã€æ€§èƒ½ä¼˜åŒ–

### 7.1 å¹¶å‘æ§åˆ¶

```python
class AIReviewOrchestrator:
    """AIå¤æ ¸ç¼–æ’å™¨"""

    def __init__(self, max_concurrent: int = 3):
        self.semaphore = asyncio.Semaphore(max_concurrent)
        self.queue = asyncio.Queue()
        self.results = []

    async def review_batch(self, items: List[ScanItem]):
        """æ‰¹é‡è¯„ä¼°"""
        tasks = [
            self._review_with_concurrency(item)
            for item in items
        ]
        await asyncio.gather(*tasks, return_exceptions=True)
```

### 7.2 ç¼“å­˜ç­–ç•¥

- ç›¸åŒè·¯å¾„çš„è¯„ä¼°ç»“æœç¼“å­˜24å°æ—¶
- ä½¿ç”¨æ–‡ä»¶å¤¹å+å¤§å°ä½œä¸ºç¼“å­˜key
- å®šæœŸæ¸…ç†è¿‡æœŸç¼“å­˜

### 7.3 è¿›åº¦ä¼˜åŒ–

- å®æ—¶æ›´æ–°è¿›åº¦ï¼ˆæ¯æ¬¡è¯„ä¼°å®Œæˆï¼‰
- é¢„ä¼°å‰©ä½™æ—¶é—´
- æ”¯æŒå–æ¶ˆè¯„ä¼°

---

## å…«ã€ç”¨æˆ·åé¦ˆè®¾è®¡

### 8.1 è¿›åº¦åé¦ˆ

```
ğŸ” AIè¯„ä¼°ä¸­... (3/10)

è¯„ä¼°é¡¹: C:\Users\...\UserData
é¢„è®¡å‰©ä½™: ~15ç§’
```

### 8.2 ç»“æœåé¦ˆ

```
âœ… AIè¯„ä¼°å®Œæˆï¼

æœ¬æ¬¡è¯„ä¼°: 10é¡¹
â”œâ”€ ğŸŸ¢ å®‰å…¨: 6é¡¹ (60%)
â”œâ”€ ğŸ”´ å±é™©: 2é¡¹ (20%)
â””â”€ ğŸŸ¡ ç–‘ä¼¼: 2é¡¹ (20%) - éœ€è¦æ‚¨ç¡®è®¤

ç‚¹å‡»é¡¹ç›®å¯æŸ¥çœ‹AIåˆ†æè¯¦æƒ…
```

### 8.3 é”™è¯¯åé¦ˆ

```
âŒ AIè¯„ä¼°å¤±è´¥
åŸå› : APIé™æµï¼Œè¯·ç¨åé‡è¯•
å·²è¯„ä¼°: 3/5é¡¹
[é‡è¯•] [è·³è¿‡å¤±è´¥é¡¹] [å–æ¶ˆ]
```

---

## ä¹ã€æ‰©å±•åŠŸèƒ½

### 9.1 è¯„ä¼°å†å²

- ä¿å­˜æ‰€æœ‰AIå¤æ ¸è®°å½•
- æ”¯æŒå¯¼å‡ºè¯„ä¼°æŠ¥å‘Š
- æ”¯æŒæ‰¹é‡åº”ç”¨å†³ç­–

### 9.2 å­¦ä¹ æ”¹è¿›

- è®°å½•ç”¨æˆ·ä¸AIå†³ç­–å·®å¼‚
- ç”Ÿæˆåé¦ˆæŠ¥å‘Š
- æ”¯æŒè‡ªå®šä¹‰è¯„ä¼°è§„åˆ™

### 9.3 æ‰¹é‡æ“ä½œ

- å…¨éƒ¨åº”ç”¨AIå»ºè®®
- æ‰¹é‡ä¿®æ”¹å†³ç­–
- ä¸€é”®å¯¼å‡º/å¯¼å…¥é…ç½®

---

## åã€æ–‡æ¡£è®¡åˆ’

### 10.1 ç”¨æˆ·æ–‡æ¡£
- AIå¤æ ¸åŠŸèƒ½ä½¿ç”¨æŒ‡å—
- å¼‚å¸¸å¤„ç†è¯´æ˜
- å¸¸è§é—®é¢˜è§£ç­”

### 10.2 å¼€å‘æ–‡æ¡£
- APIæ¥å£æ–‡æ¡£
- æ¨¡å—æ¶æ„è¯´æ˜
- æ‰©å±•å¼€å‘æŒ‡å—
